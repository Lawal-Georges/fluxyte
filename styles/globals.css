@import "tailwindcss";

/* --- üåà Variables et th√®mes existants --- */
@layer base {
    :root {
        --background: 0 0% 100%;
        --foreground: 222.2 84% 4.9%;
        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;
        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;
        --primary: 221.2 83.2% 53.3%;
        --primary-foreground: 210 40% 98%;
        --secondary: 210 40% 96%;
        --secondary-foreground: 222.2 84% 4.9%;
        --muted: 210 40% 96%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --accent: 210 40% 96%;
        --accent-foreground: 222.2 84% 4.9%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;
        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 221.2 83.2% 53.3%;
        --radius: 0.5rem;
    }

    .dark {
        --background: 222.2 84% 4.9%;
        --foreground: 210 40% 98%;
        --card: 222.2 84% 4.9%;
        --card-foreground: 210 40% 98%;
        --popover: 222.2 84% 4.9%;
        --popover-foreground: 210 40% 98%;
        --primary: 217.2 91.2% 59.8%;
        --primary-foreground: 222.2 84% 4.9%;
        --secondary: 217.2 32.6% 17.5%;
        --secondary-foreground: 210 40% 98%;
        --muted: 217.2 32.6% 17.5%;
        --muted-foreground: 215 20.2% 65.1%;
        --accent: 217.2 32.6% 17.5%;
        --accent-foreground: 210 40% 98%;
        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 210 40% 98%;
        --border: 217.2 32.6% 17.5%;
        --input: 217.2 32.6% 17.5%;
        --ring: 224.3 76.3% 94.1%;
    }
}

@layer base {
    * {
        border-color: hsl(var(--border));
    }

    body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        overflow-x: hidden;

        -webkit-text-size-adjust: 100%;
        /* iOS Safari, Chrome Mobile */
        text-size-adjust: 100%;
        /* Standard, fallback */
    }
}

/* --- ‚ú® Utilitaires et effets sp√©ciaux --- */
@layer utilities {
    .animate-pulse-slow {
        animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    .bg-gradient-radial {
        background: radial-gradient(circle, transparent 20%, #ffffff 20%, #ffffff 80%, transparent 80%, transparent),
            radial-gradient(circle, transparent 20%, #ffffff 20%, #ffffff 80%, transparent 80%, transparent) 50px 50px,
            linear-gradient(#e5e7eb 4px, transparent 4px) 0 -2px,
            linear-gradient(90deg, #e5e7eb 4px, transparent 4px) -2px 0;
        background-size: 100px 100px, 100px 100px, 50px 50px, 50px 50px;
    }

    .dark .bg-gradient-radial {
        background: radial-gradient(circle, transparent 20%, #1f2937 20%, #1f2937 80%, transparent 80%, transparent),
            radial-gradient(circle, transparent 20%, #1f2937 20%, #1f2937 80%, transparent 80%, transparent) 50px 50px,
            linear-gradient(#374151 4px, transparent 4px) 0 -2px,
            linear-gradient(90deg, #374151 4px, transparent 4px) -2px 0;
        background-size: 100px 100px, 100px 100px, 50px 50px, 50px 50px;
    }
}

/* --- üßä Effet vitre (chat-glass) --- */
.clip-hexagon {
    clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);
}

.chat-glass {
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    backdrop-filter: blur(8px) saturate(120%);
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

/* --- üí¨ Scrollbar --- */
.chat-scroll::-webkit-scrollbar {
    width: 8px;
}

.chat-scroll::-webkit-scrollbar-thumb {
    background-color: rgba(100, 100, 100, 0.2);
    border-radius: 999px;
}

/* --- üåê Scrollbar g√©n√©rale --- */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-thumb {
    background-color: rgba(100, 100, 100, 0.4);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background-color: rgba(100, 100, 100, 0.6);
}

/* --- ‚ö° Chatbot mobile fix --- */
.chatbot-container {
    position: fixed;
    bottom: 0;
    right: 0;
    width: 100%;
    max-width: 380px;
    height: 90vh;
    max-height: 95vh;
    display: flex;
    flex-direction: column;
    border-radius: 1rem 1rem 0 0;
    background: rgba(255, 255, 255, 0.95);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(200, 200, 200, 0.4);
    overflow: hidden;
    z-index: 9999;
}

/* Mode sombre */
@media (prefers-color-scheme: dark) {
    .chatbot-container {
        background: rgba(17, 24, 39, 0.95);
        border-color: rgba(75, 85, 99, 0.6);
    }
}

/* Maintien visible sur mobile */
@supports (height: 100dvh) {
    .chatbot-container {
        height: 90dvh;
    }
}

/* ‚úÖ Correction du scroll et du clavier mobile */
.chat-scroll {
    flex: 1;
    overflow-y: auto;
    /* scroll vertical */
    overscroll-behavior-y: contain;
    /* emp√™che les scrolls ‚Äúrebond‚Äù sur mobile */
    scroll-behavior: smooth;
    /* scroll fluide */
    padding-bottom: 0.5rem;
    /* espace sous les messages */
}

@media (max-width: 640px) {
    .chatbot-container {
        left: 0;
        right: 0;
        width: 100%;
        height: 100dvh;
        border-radius: 18px 18px 0 0;
    }

    .chat-scroll {
        max-height: calc(100dvh - 150px);
    }

    form {
        position: sticky;
        bottom: 0;
        background: inherit;
    }
}

/* Emp√™che zoom sur iOS inputs */
input {
    font-size: 16px;
}

/* Animation typing douce */
@keyframes pulse {

    0%,
    100% {
        opacity: 0.6;
    }

    50% {
        opacity: 1;
    }
}

.animate-pulse {
    animation: pulse 1.4s infinite;
}